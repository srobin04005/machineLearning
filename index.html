<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Machinelearning : Coursera Data Science Track">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Machinelearning</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/srobin04005/machineLearning">View on GitHub</a>

          <h1 id="project_title">Machinelearning</h1>
          <h2 id="project_tagline">Coursera Data Science Track</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/srobin04005/machineLearning/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/srobin04005/machineLearning/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <p>&lt;!DOCTYPE html&gt;</p>

<p></p>

<p></p>

<p>


</p>

<p></p>

<p></p>PML Assignment



<p>

</p>



code{white-space: pre;}

<p></p>




  pre:not([class]) {
    background-color: white;
  }




<p></p>

<p></p>


.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}


<div>


<div id="header">
<h1>
<a id="pml-assignment" class="anchor" href="#pml-assignment" aria-hidden="true"><span class="octicon octicon-link"></span></a>PML Assignment</h1>
<h4>
<a id="scott" class="anchor" href="#scott" aria-hidden="true"><span class="octicon octicon-link"></span></a><em>scott</em>
</h4>
<h4>
<a id="thursday-november-06-2014" class="anchor" href="#thursday-november-06-2014" aria-hidden="true"><span class="octicon octicon-link"></span></a><em>Thursday, November 06, 2014</em>
</h4>
</div>

<pre><code>setwd("C:\\Users\\srobin\\Documents\\GitHub\\machineLearning")

library(knitr)</code></pre>

<div id="weight-lifting-exercises-dataset">
<h3>
<a id="weight-lifting-exercises-dataset" class="anchor" href="#weight-lifting-exercises-dataset" aria-hidden="true"><span class="octicon octicon-link"></span></a>Weight Lifting Exercises Dataset</h3>
<p>This dataset was derived from weight lifting exercises of six healthy subjects, equiped with sensing devices on-body and within the dumbbell used to do the exercise.</p>
<p>“Six young health participants were asked to perform one set of 10 repetitions of the Unilateral Dumbbell Biceps Curl in five different fashions: exactly according to the specification (Class A), throwing the elbows to the front (Class B), lifting the dumbbell only halfway (Class C), lowering the dumbbell only halfway (Class D) and throwing the hips to the front (Class E).”</p>
<p>Class A was considered to be the correct manner in doing the exercise, while Class B,C,D and E were characteristic of incorrect procedures.</p>
<p>Read more: <a href="http://groupware.les.inf.puc-rio.br/har#weight_lifting_exercises#ixzz3IbSKQZlv">http://groupware.les.inf.puc-rio.br/har#weight_lifting_exercises#ixzz3IbSKQZlv</a></p>
<p>The goal of this analysis is to predict the “classe” of 20 test cases solely from the manner in which they did the exercise, represented by the data within those 20 cases.</p>
<pre><code># read in data and convert missinga info to "NA"
train &lt;- read.csv("pml-training.csv",na.strings=c("", "NA"))
test &lt;- read.csv("pml-testing.csv",na.strings=c("", "NA"))

# throw out all cols with NA or missing values
trainDel &lt;- train[,colSums(is.na(train)) == 0 ]
testDel &lt;- test[,colSums(is.na(test)) == 0 ]</code></pre>
</div>

<div id="preparation">
<h3>
<a id="preparation" class="anchor" href="#preparation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Preparation</h3>
<p>Parrallel processing was set up using 7 of the 8 CPU cores on the test system - Lenovo W530 laptop w/8GB memory and an i7-3630QM CPU at 2.40GB.</p>
</div>

<div id="loading-data-and-exploration">
<h3>
<a id="loading-data-and-exploration" class="anchor" href="#loading-data-and-exploration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Loading data and exploration</h3>
<p>The data was read using the -na.strings- parameter and then a subset was created to omit all columns with NA. This trimmed the number of columns (variables) from 160 to 60. A summary of the data was reviewed to ensure all observations were valid and did not include NAs. There were 19622 observations. Data was split with -createDataPartition- into a 60/40 split (Training vs. Testing).</p>
<p>A basic “gbm” model (defaults) was run using caret -train- on the training dataset variables using “classe” as the class variable, then -varImp()- was applied to the model to determine the most important variables. The top 22 variables were selected to be used in the final model. 22 is an arbitrary selection, as the major issue was to reduce the number of variables to scale down the model for quicker processing, as well as to denote the variables that have the most influenence on the predictions.</p>
<pre><code># Set up Parrallel processing to improve speed library(doSNOW) cl &lt;-
# makeCluster(7, type='SOCK') registerDoSNOW(cl) split for training and
# testing library(caret) set.seed(1235) inTrain &lt;-
# createDataPartition(y=trainDel$classe, p=0.60,list=FALSE) training &lt;-
# trainDel[inTrain,]; testing &lt;- trainDel[-inTrain,] model modelFit &lt;-
# train(classe~., data=training, method='gbm' ) stop parrallel processing
# and reclaim memory stopCluster(cl)

# varImp(modelFit)</code></pre>
</div>

<div id="using-the-model">
<h3>
<a id="using-the-model" class="anchor" href="#using-the-model" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using the model</h3>
<p>K-fold cross validation was selected. 10 folds, repeated 10 times, with threshold of 0.80 was used. Preprocessing using “center”, “scale” and “pca”.</p>
<p>Variables were reduced to 20 variable for the final model.</p>
<pre><code>library(caret)
# selected variables from varImp()

myVars &lt;- c( "num_window","yaw_belt","pitch_belt","accel_forearm_x","roll_belt",
             "roll_forearm","magnet_dumbbell_z","pitch_forearm",
             "magnet_dumbbell_x","magnet_dumbbell_y","magnet_belt_x",
             "accel_dumbbell_y","roll_arm","roll_dumbbell","magnet_arm_y",
             "magnet_belt_z","accel_arm_x","magnet_forearm_y",
             "accel_belt_z","magnet_forearm_x","accel_dumbbell_z",
             "classe"
             )


set.seed(1)  # produced 100% correct
inTrain &lt;- createDataPartition(y=trainDel$classe,
                               p=0.60,list=FALSE)

trainingRF &lt;- trainDel[inTrain,myVars] 
testingRF  &lt;- trainDel[-inTrain,myVars]

# Set up parrallel processing
library(parallel)
cl2 &lt;- makeCluster(7, type="SOCK")
registerDoSNOW(cl2)

# trainControl
folds &lt;- 10
repeats &lt;- 10
fitControl &lt;- trainControl(method="repeatedcv",
                           number=folds,
                           repeats=repeats,
                           #classProbs=TRUE,
                           preProcOptions=list(thresh=0.8),
                           allowParallel=TRUE
                          )

# model - preprocessing and tuning
Fit_rf &lt;- train(classe ~ ., 
                     data=trainingRF, 
                     trControl=fitControl,
                     tuneLength=5,
                     preProcess=c("center","scale","pca"),
                     method="rf"
)

# Shut off parrallel processing and reclaim memory 
stopCluster(cl2)</code></pre>
<pre><code>predictions_rf &lt;- predict(Fit_rf,testingRF)

plot(predictions_rf,testingRF$classe)</code></pre>
<p><img title="plot of chunk plots" alt="plot of chunk plots" width="672"></p>
</div>

<div id="analysis-the-results">
<h3>
<a id="analysis-the-results" class="anchor" href="#analysis-the-results" aria-hidden="true"><span class="octicon octicon-link"></span></a>Analysis the results</h3>
<pre><code># true accuracy of the predicted model
outOfSampleError &lt;- sum(predictions_rf == testingRF$classe)/length(predictions_rf)
outOfSampleError</code></pre>
<pre><code>## [1] 0.9414</code></pre>
<pre><code># out of sample error and percentage of out of sample error
outOfSampleError &lt;- 1 - outOfSampleError
outOfSampleError</code></pre>
<pre><code>## [1] 0.05863</code></pre>
<pre><code>correct &lt;- as.factor(c("B","A","B","A","A","E","D","B","A","A","B","C","B","A","E","E","A","B","B","B"))
pred &lt;- predict(Fit_rf,test)
pred</code></pre>
<pre><code>##  [1] B A B A A C D B A A B C B A E E A D B B
## Levels: A B C D E</code></pre>
<pre><code>plot(correct,pred)</code></pre>
<p><img title="plot of chunk analysis" alt="plot of chunk analysis" width="672"></p>
</div>

<p></p>
</div>







<p>
</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Machinelearning maintained by <a href="https://github.com/srobin04005">srobin04005</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
